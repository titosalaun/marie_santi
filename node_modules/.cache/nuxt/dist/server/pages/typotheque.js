exports.ids = [15];
exports.modules = {

/***/ 45:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(URL) {/* harmony import */ var core_js_modules_esnext_string_replace_all_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(41);
/* harmony import */ var core_js_modules_esnext_string_replace_all_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_esnext_string_replace_all_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var vuex__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);
/* harmony import */ var vuex__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(vuex__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(5);
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var tone__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(37);
/* harmony import */ var tone__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(tone__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(38);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_4__);

//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//




var P5;

if (false) { var effet_3, effet_2, effet_1; }

var playerSound;
var bufferSound = new Array();
/* harmony default export */ __webpack_exports__["a"] = ({
  middleware: 'auth',
  computed: { ...Object(vuex__WEBPACK_IMPORTED_MODULE_1__["mapGetters"])(['isAuthenticated', 'loggedInfont'])
  },

  mounted() {
    var id = 0;
    localStorage.setItem('id_message', JSON.stringify(id));
    this.parametres = JSON.parse(localStorage.getItem('parametres') || "[]");
    this.getMessages();
    playerSound = new tone__WEBPACK_IMPORTED_MODULE_3__["Player"]().toDestination();
    this.initDisplayErreur();
    P5 = __webpack_require__(40);
  },

  data() {
    return {
      script: null,
      ps: null,
      radar: new Array(),
      url_server: this.$store.state.url_server,
      id_user: this.$auth.user.id,
      parametres: '',
      messages: [],
      isShowLoading: true,
      isShowNoResult: false,
      timeoutObj: '',
      isTools: false,
      isPause: false,
      myCurrentTimeSave: 0,
      valSetTimeout: 0,
      indexLoad: 0,
      tito: ''
    };
  },

  directives: {
    forCallback(el, binding) {
      let element = binding.value;
      var key = element.key;
      var len = 0;

      if (Array.isArray(element.array)) {
        len = element.array.length;
      } else if (typeof element.array === 'object') {
        var keys = Object.keys(element.array);
        key = keys.indexOf(key);
        len = keys.length;
      }

      if (key == len - 1) {
        if (typeof element.callback === 'function') {
          element.callback(0, element.array);
        }
      }
    }

  },
  methods: {
    getMessages: function () {
      axios__WEBPACK_IMPORTED_MODULE_2___default.a.get(this.url_server + "/getMessages?id_user=" + this.id_user).then(response => {
        this.isShowLoading = false;
        this.messages = response.data.liste;
        if (this.messages.length == 0) this.isShowNoResult = true;
      }).catch(error => displayErreur('Erreur lors du chargement des messages'));
    },
    delMessage: function (id_message) {
      axios__WEBPACK_IMPORTED_MODULE_2___default.a.get(this.url_server + "/delMessage?id_message=" + id_message).then(response => {
        this.isShowLoading = true;
        this.isShowNoResult = false;
        this.messages = new Array();
        this.getMessages();
      }).catch(error => displayErreur('Erreur lors du chargement des messages'));
    },
    getPoster: function (id_message, event) {
      event.target.innerHTML = 'dev en cours';
      setTimeout(function () {
        event.target.innerHTML = 'Créer un poster';
      }.bind(this), 2000);
    },

    async logout() {
      await this.$auth.logout();
      this.$router.push('/login');
    },

    loadSound(file, id, index) {
      console.log("debut"); //file = convertSound(file);

      console.log("blob : " + file); //var blobUrl = URL.createObjectURL(file);

      bufferSound[index] = new tone__WEBPACK_IMPORTED_MODULE_3__["ToneAudioBuffer"]({
        onload: () => {
          document.querySelector('#' + id + ' .duration').innerHTML = this.convertSoundDuration(bufferSound[index].duration);
          document.querySelector('#' + id + ' .content-play').classList.remove('isLoading');
        },
        onerror: () => {
          document.querySelector('#' + id + ' .duration').innerHTML = "no sound";
        },
        reverse: false,
        url: file
      });
      /*bufferSound[index] = new Tone.ToneAudioBuffer(file, ( ) => {
      		console.log("in : " + id)
      	document.querySelector('#' + id + ' .duration').innerHTML = this.convertSoundDuration(bufferSound[index].duration);
      	document.querySelector('#' + id + ' .content-play').classList.remove('isLoading');
      });*/
    },

    onload() {
      console.log("ONLOAD");
    },

    playSound(file, id, index) {
      if (!document.querySelector('#' + id + ' .content-play').classList.contains('isLoading')) {
        if (this.isPlayingSound == index) {
          this.stopSound();
        } else {
          if (this.isPlayingSound != -1) {
            clearTimeout(this.valSetTimeout);
            this.stopSound();
          }

          this.initAllSound();
          tone__WEBPACK_IMPORTED_MODULE_3__["Transport"].start();
          this.myCurrentTime = new tone__WEBPACK_IMPORTED_MODULE_3__["TransportTime"]();
          this.isPlayingSound = index;
          this.progressValTotal = bufferSound[index].duration;
          playerSound.buffer = bufferSound[index];
          playerSound.start();

          playerSound.onstop = () => {
            this.stopSound();
          };

          this.playSoundProgress(id);
          console.log("TITO1"); //document.querySelector('#' + id + ' .player img').setAttribute("src","/img/pause.png");

          document.querySelector('#' + id + ' .ctrlPlay').classList.add("hide");
          document.querySelector('#' + id + ' .ctrlPause').classList.remove("hide");
        }
      }
    },

    initAllSound() {
      document.querySelectorAll('.progress-play').forEach(el => el.style.width = '0px');
      document.querySelectorAll('.ctrlPlay').forEach(el => el.classList.remove("hide"));
      document.querySelectorAll('.ctrlPause').forEach(el => el.classList.add("hide"));
    },

    pauseSound(id) {
      //Tone.Transport.stop();
      clearInterval(this.valSetInterval);
      playerSound.stop();
      this.myCurrentTimeSave = this.myCurrentTime;
      console.log("PAUSE : " + this.myCurrentTimeSave); //document.querySelector('#' + id + ' .player img').setAttribute("src","/img/play.svg");

      document.querySelector('#' + id + ' .ctrlPlay').classList.remove("hide");
      document.querySelector('#' + id + ' .ctrlPause').classList.add("hide"); //Tone.Transport.stop();
      //this.myCurrentTime = 0;
    },

    stopSound() {
      //Tone.stop();
      console.log("STOP");
      this.isPlayingSound = -1;
      this.progressValTotal = 0;
      clearInterval(this.valSetInterval);
      this.initAllSound();
      playerSound.stop();
      tone__WEBPACK_IMPORTED_MODULE_3__["Transport"].stop();
      this.myCurrentTime = 0;
    },

    playSoundProgress(id) {
      console.log(this.myCurrentTime + ' / ' + this.progressValTotal);
      var val_progress = Math.round(this.myCurrentTime * 100 / this.progressValTotal);

      if (this.isPlayingSound != -1 && val_progress <= 101) {
        document.querySelector('#' + id + ' .progress-play').style.width = val_progress + '%';
        this.valSetInterval = setTimeout(function () {
          if (this.isPlayingSound != -1) this.playSoundProgress(id);
        }.bind(this), 200);
      } else {
        clearTimeout(this.valSetInterval);
        tone__WEBPACK_IMPORTED_MODULE_3__["Transport"].stop();
      }
    },

    convertSoundDuration(sec) {
      var val = (sec / 60).toFixed(2);
      return val.toString().replace(".", ":");
    },

    convertSound(data) {
      let binary = convertURIToBinary(data);
      let blob = new Blob([binary], {
        type: 'audio/ogg'
      });
      let blobUrl = URL.createObjectURL(blob);
      return blobUrl;
    },

    initDisplayErreur: function () {
      hideErreur();
    },

    getRandomNumber(min, max) {
      return Math.floor(Math.random() * (max - min + 1) + min);
    },

    callbackOnP5: function (timeStr) {
      this.tito = timeStr;
    },
    loadMessage: function (elements, index, id_message, id_effet, message, color_text, color_bg, font_size) {
      console.log("id_effet : " + id_effet);
      this.radar[index] = this.selectEffet(index, id_effet);
      this.ps = new P5(this.radar[index].main);
      this.radar[index].setDelegate(this.callbackOnP5);
      this.radar[index].setFctCanvasSize(800, 500);
      this.radar[index].setFctCanvasId(id_message);
      this.radar[index].setFctSound(0);
      this.radar[index].setFctTextColor(color_text);
      this.radar[index].setFctBgColor(color_bg);
      this.radar[index].setFctFontSize(font_size);
      this.radar[index].setFctTexte(message, index);
      index++; //if (index < 2) this.callback(index,elements)
      //this.startP5();
    },
    selectEffet: function (index, id_effet) {
      if (id_effet == 1) this.radar[index] = effet_1;
      if (id_effet == 2) this.radar[index] = effet_2;
      if (id_effet == 3) this.radar[index] = effet_3;
      return this.radar[index];
    },

    callback(index, elements) {//this.loadMessage(elements,index,elements[index].id_message,elements[index].id_effet,elements[index].texte,elements[index].color_text,elements[index].color_bg,elements[index].font_size);
    },

    goHome: function (id_message) {
      localStorage.setItem('id_message', JSON.stringify(id_message));
      document.location = '/';
    },
    formatMessage: function (message) {
      message = message.replaceAll("<br>", ' ');
      message = message.replaceAll("<div>", ' ');
      message = message.replaceAll("</div>", ' ');
      message = message.replaceAll("<br />", ' ');
      return message;
    }
  }
});
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(39)["URL"]))

/***/ }),

/***/ 64:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@nuxt/components/dist/loader.js??ref--0-0!./node_modules/vue-loader/lib??vue-loader-options!./pages/typotheque.vue?vue&type=template&id=54621e73&scoped=true&
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:"container"},[_vm._ssrNode("<div class=\"content\" data-v-54621e73>","</div>",[_vm._ssrNode("<div class=\"col-left\" data-v-54621e73>","</div>",[_vm._ssrNode("<div class=\"logo\" data-v-54621e73>","</div>",[_c('nuxt-link',{attrs:{"to":"/"}},[_c('svg',{attrs:{"id":"Calque_1","data-name":"Calque 1","xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 776.86 861.5"}},[_c('path',{attrs:{"d":"M291.29,701.18c0,92.18,68.41,131,165.81,131,112.47,0,162.9-51,162.9-163.49V558.56H444.92C360.86,558.56,291.29,614.22,291.29,701.18ZM151.57,725.53c0-113,68.41-197.69,176.24-208.13V490.15c-84.06-10.43-146.67-87-146.67-179.14,0-133.34,130.44-215.66,280-215.66C622.9,95.35,740,173,747,332.46H611.89c-7-80-60.87-117.1-149-117.1-83.48,0-141.45,38.84-141.45,114.78s55.65,117.11,139.14,117.11H928.43V558.56H755.08c0,266.11-3.47,265,5.8,273.64,8.12,7.54,11.6,5.22,167.55,5.22V945.25c-207.55,0-224.94,5.8-263.21-34.2-22.61-23.77-21.45-74.79-21.45-74.79H622.9c-34.78,86.38-107.83,120.59-203.49,120.59C265.2,956.85,151.57,877.42,151.57,725.53Z","transform":"translate(-151.57 -95.35)"}})])])],1),_vm._ssrNode(" <div class=\"tools hidePara\" data-v-54621e73><div"+(_vm._ssrClass("tools-content",{ open: _vm.isTools }))+" data-v-54621e73></div> <div class=\"tools-nav\" data-v-54621e73>Paramètres</div></div>")],2),_vm._ssrNode(" "),_vm._ssrNode("<div"+(_vm._ssrClass("col-content",{ marge: _vm.isTools }))+" data-v-54621e73>","</div>",[_vm._ssrNode("<div class=\"col-content-list\" data-v-54621e73>","</div>",[_vm._ssrNode(((!_vm.messages.length)?("<div data-v-54621e73><div"+(_vm._ssrStyle(null,null, { display: (_vm.isShowLoading) ? '' : 'none' }))+" data-v-54621e73>Chargement des messages...</div> <div"+(_vm._ssrStyle(null,null, { display: (_vm.isShowNoResult) ? '' : 'none' }))+" data-v-54621e73>aucun message enregistré</div></div>"):"<!---->")+" "),_vm._l((_vm.messages),function(message,indexMessage){return _c('div',{directives:[{name:"for-callback",rawName:"v-for-callback",value:({key: indexMessage, array: _vm.messages, callback: _vm.callback}),expression:"{key: indexMessage, array: messages, callback: callback}"}],staticClass:"item"},[_vm._ssrNode("<div"+(_vm._ssrAttr("id",'S_' + indexMessage))+" class=\"item-content\" data-v-54621e73><div class=\"message relative cursor-pointer\""+(_vm._ssrStyle(null,{ 'color': message.color_text }, null))+" data-v-54621e73>"+_vm._ssrEscape("\n\t\t\t\t\t  \t\t "+_vm._s(_vm.formatMessage(message.texte))+" \n\t\t\t\t\t  \t\t")+"<div"+(_vm._ssrAttr("id",'p5Canvas_' + message.id_message))+" class=\"canvas-area\" style=\"display:block;width: 100%;height:auto\" data-v-54621e73></div></div> <div class=\"item-tools\" data-v-54621e73><div data-v-54621e73><button class=\"getPoster\" data-v-54621e73><a"+(_vm._ssrAttr("href",'/poster?id=' + message.id_message))+" data-v-54621e73>Créer un poster</a></button></div> <div data-v-54621e73><button data-v-54621e73>Modifier la font</button></div> <div data-v-54621e73><button data-v-54621e73>Supprimer</button></div></div></div>")])})],2)])],2)])}
var staticRenderFns = []


// CONCATENATED MODULE: ./pages/typotheque.vue?vue&type=template&id=54621e73&scoped=true&

// EXTERNAL MODULE: ./node_modules/babel-loader/lib??ref--2-0!./node_modules/@nuxt/components/dist/loader.js??ref--0-0!./node_modules/vue-loader/lib??vue-loader-options!./pages/typotheque.vue?vue&type=script&lang=js&
var typothequevue_type_script_lang_js_ = __webpack_require__(45);

// CONCATENATED MODULE: ./pages/typotheque.vue?vue&type=script&lang=js&
 /* harmony default export */ var pages_typothequevue_type_script_lang_js_ = (typothequevue_type_script_lang_js_["a" /* default */]); 
// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js
var componentNormalizer = __webpack_require__(2);

// CONCATENATED MODULE: ./pages/typotheque.vue



function injectStyles (context) {
  
  
}

/* normalize component */

var component = Object(componentNormalizer["a" /* default */])(
  pages_typothequevue_type_script_lang_js_,
  render,
  staticRenderFns,
  false,
  injectStyles,
  "54621e73",
  "2abaa23e"
  
)

/* harmony default export */ var typotheque = __webpack_exports__["default"] = (component.exports);

/***/ })

};;
//# sourceMappingURL=typotheque.js.map