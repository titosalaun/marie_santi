exports.ids = [7];
exports.modules = {

/***/ 52:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// CONCATENATED MODULE: ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@nuxt/components/dist/loader.js??ref--0-0!./node_modules/vue-loader/lib??vue-loader-options!./pages/list.vue?vue&type=template&id=701ccebe&scoped=true&
var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:"container"},[_vm._ssrNode("<div class=\"content\" data-v-701ccebe>","</div>",[_vm._ssrNode("<div class=\"col-left\" data-v-701ccebe>","</div>",[_vm._ssrNode("<div class=\"logo\" data-v-701ccebe>","</div>",[_c('nuxt-link',{attrs:{"to":"/"}},[_c('svg',{attrs:{"id":"Calque_1","data-name":"Calque 1","xmlns":"http://www.w3.org/2000/svg","viewBox":"0 0 776.86 861.5"}},[_c('path',{attrs:{"d":"M291.29,701.18c0,92.18,68.41,131,165.81,131,112.47,0,162.9-51,162.9-163.49V558.56H444.92C360.86,558.56,291.29,614.22,291.29,701.18ZM151.57,725.53c0-113,68.41-197.69,176.24-208.13V490.15c-84.06-10.43-146.67-87-146.67-179.14,0-133.34,130.44-215.66,280-215.66C622.9,95.35,740,173,747,332.46H611.89c-7-80-60.87-117.1-149-117.1-83.48,0-141.45,38.84-141.45,114.78s55.65,117.11,139.14,117.11H928.43V558.56H755.08c0,266.11-3.47,265,5.8,273.64,8.12,7.54,11.6,5.22,167.55,5.22V945.25c-207.55,0-224.94,5.8-263.21-34.2-22.61-23.77-21.45-74.79-21.45-74.79H622.9c-34.78,86.38-107.83,120.59-203.49,120.59C265.2,956.85,151.57,877.42,151.57,725.53Z","transform":"translate(-151.57 -95.35)"}})])])],1),_vm._ssrNode(" "),_vm._ssrNode("<div class=\"tools\" data-v-701ccebe>","</div>",[_vm._ssrNode("<div"+(_vm._ssrClass("tools-content",{ open: _vm.isTools }))+" data-v-701ccebe>","</div>",[_vm._ssrNode("<div data-v-701ccebe><label data-v-701ccebe>Message</label> <textarea placeholder=\"...\" name=\"tools_message\" id=\"tools_message\" data-v-701ccebe>"+_vm._ssrEscape(_vm._s(_vm.tools_message))+"</textarea></div> "),_vm._ssrNode("<div data-v-701ccebe>","</div>",[_vm._ssrNode("<label data-v-701ccebe>Couleur</label> "),_vm._ssrNode("<div class=\"zoneColorText\" data-v-701ccebe>","</div>",[_c('color-picker',{on:{"change":_vm.updateColorText},model:{value:(_vm.tools_color_text),callback:function ($$v) {_vm.tools_color_text=$$v},expression:"tools_color_text"}})],1)],2),_vm._ssrNode(" "),_vm._ssrNode("<div data-v-701ccebe>","</div>",[_vm._ssrNode("<label data-v-701ccebe>Fond</label> "),_vm._ssrNode("<div class=\"zoneColorBg\" data-v-701ccebe>","</div>",[_c('color-picker',{on:{"change":_vm.updateColorBg},model:{value:(_vm.tools_color_bg),callback:function ($$v) {_vm.tools_color_bg=$$v},expression:"tools_color_bg"}})],1)],2),_vm._ssrNode(" <div data-v-701ccebe><label data-v-701ccebe>"+_vm._ssrEscape("Taille : "+_vm._s(_vm.tools_font_size))+"</label> <input type=\"range\" id=\"tools_font_size\" min=\"10\" max=\"200\""+(_vm._ssrAttr("value",(_vm.tools_font_size)))+" class=\"slider\" data-v-701ccebe></div> <div"+(_vm._ssrStyle(null,null, { display: (_vm.isAuthenticated) ? '' : 'none' }))+" data-v-701ccebe><label class=\"cursor-pointer\" data-v-701ccebe>log-out</label></div>")],2),_vm._ssrNode(" <div class=\"tools-nav\" data-v-701ccebe>Paramètres</div>")],2)],2),_vm._ssrNode(" "),_vm._ssrNode("<div"+(_vm._ssrClass("col-content",{ marge: _vm.isTools }))+" data-v-701ccebe>","</div>",[_vm._ssrNode("<div class=\"mesure\" data-v-701ccebe><div class=\"mesure-val\" data-v-701ccebe>"+_vm._ssrEscape(_vm._s(_vm.decibelVal))+"</div><div class=\"indice\" data-v-701ccebe>DBA</div></div> <div id=\"content\" data-v-701ccebe></div> "),_vm._ssrNode("<div class=\"col-content-list\" data-v-701ccebe>","</div>",[(!_vm.messages.length)?_vm._ssrNode("<div data-v-701ccebe>","</div>",[_vm._ssrNode("<div"+(_vm._ssrStyle(null,null, { display: (_vm.isShowLoading) ? '' : 'none' }))+" data-v-701ccebe>Chargement des messages...</div>"),_vm._ssrNode("<div class=\"flex\""+(_vm._ssrStyle(null,null, { display: (_vm.isShowNoResult) ? '' : 'none' }))+" data-v-701ccebe>","</div>",[_vm._ssrNode("<div class=\"pr-1 flex items-center\" data-v-701ccebe>","</div>",[_c('NuxtLink',{attrs:{"to":{ path: _vm.url_add}}},[_vm._v("aucun résultat, ajouter un message ")])],1),_vm._ssrNode(" "),_vm._ssrNode("<div class=\"add highlight\" data-v-701ccebe>","</div>",[_c('NuxtLink',{attrs:{"to":{ path: _vm.url_add}}},[_c('svg',{staticClass:"big",attrs:{"xmlns":"http://www.w3.org/2000/svg","fill":"none","viewBox":"0 0 24 24","stroke":"currentColor"}},[_c('path',{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2","d":"M12 4v16m8-8H4"}})])])],1)],2)],2):_vm._e(),_vm._ssrNode(" "+(_vm._ssrList((_vm.messages),function(message,indexMessage){return ("<div class=\"item\" data-v-701ccebe>"+_vm._ssrEscape(_vm._s(message.texte))+"</div>")})))],2),_vm._ssrNode(" <div data-v-701ccebe><div id=\"p5Canvas\" class=\"canvas-area\" data-v-701ccebe></div></div>")],2),_vm._ssrNode(" <div class=\"col-right\" data-v-701ccebe><div class=\"startMic cursor-pointer\" data-v-701ccebe>start</div></div>")],2)])}
var staticRenderFns = []


// CONCATENATED MODULE: ./pages/list.vue?vue&type=template&id=701ccebe&scoped=true&

// EXTERNAL MODULE: external "vuex"
var external_vuex_ = __webpack_require__(3);

// EXTERNAL MODULE: external "axios"
var external_axios_ = __webpack_require__(5);
var external_axios_default = /*#__PURE__*/__webpack_require__.n(external_axios_);

// EXTERNAL MODULE: external "tone"
var external_tone_ = __webpack_require__(37);

// CONCATENATED MODULE: ./node_modules/babel-loader/lib??ref--2-0!./node_modules/@nuxt/components/dist/loader.js??ref--0-0!./node_modules/vue-loader/lib??vue-loader-options!./pages/list.vue?vue&type=script&lang=js&
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//
//



/* harmony default export */ var listvue_type_script_lang_js_ = ({
  middleware: 'auth',
  computed: { ...Object(external_vuex_["mapGetters"])(['isAuthenticated', 'loggedInfont'])
  },

  mounted() {
    this.parametres = JSON.parse(localStorage.getItem('parametres') || "[]");
    this.loadParametres();
    this.getMessages();
  },

  data() {
    return {
      url_server: this.$store.state.url_server,
      id_user: this.$auth.user.id,
      parametres: '',
      messages: [],
      isShowLoading: true,
      isShowNoResult: false,
      isTools: false,
      timeOutTools: '',
      tools_message: '',
      tools_color_text: '#fff',
      tools_color_bg: '#000',
      tools_font_size: 20,
      isMic: false,
      meter: '',
      mic: '',
      decibelVal: 0.0,
      intervalDisplayMic: '',
      micFFT: '',
      isMicInitialize: false
    };
  },

  methods: {
    getMessages: function () {
      external_axios_default.a.get(this.url_server + "/getMessages?id_user=" + this.id_user).then(response => {
        this.isShowLoading = false;
        this.messages = response.data.liste;
        if (this.messages.length == 0) this.isShowNoResult = true;
      }).catch(error => displayErreur('Erreur lors du chargement des messages'));
    },

    openTools() {
      if (this.isTools) {
        this.isTools = false;
      } else {
        this.isTools = true;
      }
    },

    initTools() {
      //this.updateCss();
      this.updateColorPicker();
    },

    updateColorText: function () {
      clearTimeout(this.timeOutTools);
      this.timeOutTools = setTimeout(function () {
        this.updateColorPicker();
        this.$parent.$emit('update:color_text_send', this.tools_color_text);
      }.bind(this), 100);
    },
    updateColorBg: function () {
      clearTimeout(this.timeOutTools);
      this.timeOutTools = setTimeout(function () {
        this.updateColorPicker();
        this.$parent.$emit('update:color_bg_send', this.tools_color_bg);
      }.bind(this), 100);
    },
    updateColorPicker: function () {
      document.querySelector('.zoneColorText .color-block .value').innerHTML = this.tools_color_text;
      document.querySelector('.zoneColorBg .color-block .value').innerHTML = this.tools_color_bg;
    },
    loadParametres: function () {
      var para = this.parametres;
      this.tools_color_text = para.color_text;
      this.tools_color_bg = para.color_bg;
      this.initTools();
    },
    updateFontSize: function () {
      document.querySelector('.col-content-list').style.fontSize = this.tools_font_size + "px";
      document.querySelector('.col-content-list').style.lineHeight = parseInt(this.tools_font_size) + 3 + "px";
    },
    initMic: function () {
      this.meter = new external_tone_["Meter"]({});
      this.mic = new external_tone_["UserMedia"]();
      this.mic.connect(this.meter); //this.meter.toMaster()

      document.querySelector('.mesure').supported = external_tone_["UserMedia"].supported;
      this.mic.open();
      /*this.mic = new Tone.UserMedia();
      	this.micFFT = new Tone.FFT({
      	tone: this.micFFT,
      	parent: document.querySelector("#content")
      });
      this.mic.connect(this.micFFT);*/
    },
    startMic: function () {
      external_tone_["context"].resume();

      if (this.isMic) {
        this.mic.close();
        this.decibelVal = 0.0;
        this.isMic = false;
        this.isMicInitialize = false;
        document.querySelector('.startMic').innerHTML = 'start';
      } else {
        if (!this.isMicInitialize) {
          this.initMic();
          this.isMicInitialize = true;
        }

        this.isMic = true;
        document.querySelector('.startMic').innerHTML = 'stop';
      }

      if (this.isMic) {
        this.intervalDisplayMic = setInterval(() => this.displayVal(this.meter.getValue()), 100);
      } else {
        clearInterval(this.intervalDisplayMic);
      }
    },
    displayVal: function (val) {
      this.index++; //const dBFS = this.meter.getLevel();

      val = val;
      const lowerBound = 0;
      const upperBound = 100;
      val = parseInt(val) + 100;
      this.decibelVal = val;
    },
    clamp: function (value, min, max) {
      return Math.min(max, Math.max(min, value));
    },

    async logout() {
      await this.$auth.logout();
      this.$router.push('/login'); // this.$store.commit('setLoggedIn', false) // even if I use this
      //console.log(this.$auth.loggedIn) // -> false
    }

  }
});
// CONCATENATED MODULE: ./pages/list.vue?vue&type=script&lang=js&
 /* harmony default export */ var pages_listvue_type_script_lang_js_ = (listvue_type_script_lang_js_); 
// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js
var componentNormalizer = __webpack_require__(2);

// CONCATENATED MODULE: ./pages/list.vue



function injectStyles (context) {
  
  
}

/* normalize component */

var component = Object(componentNormalizer["a" /* default */])(
  pages_listvue_type_script_lang_js_,
  render,
  staticRenderFns,
  false,
  injectStyles,
  "701ccebe",
  "3ea7fa68"
  
)

/* harmony default export */ var list = __webpack_exports__["default"] = (component.exports);

/***/ })

};;
//# sourceMappingURL=list.js.map