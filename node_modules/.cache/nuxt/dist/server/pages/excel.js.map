{"version":3,"file":"pages/excel.js","sources":["webpack:///./pages/excel.vue","webpack:///./pages/excel.vue?3488","webpack:///./pages/excel.vue?d0aa","webpack:///./pages/excel.vue?374d"],"sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapGetters } from 'vuex';\nimport axios from 'axios';\nimport * as Tone from 'tone';\nimport moment from 'moment';\n\nvar playerSound;\nvar bufferSound = new Array();\n\nexport default {\n\tlayout:'defaultold',\n\tmounted() {   \n\n\t \n\t},\n\tdata() {\n\t    return {\n\t\t    url_server:this.$store.state.url_server,\n\t\t    id_user: 0,\n\t\t    parametres:'',\n\t\t    messages : [],\n\t\t    isShowLoading:true,\n\t\t    isShowNoResult:false,\n\t\t    timeoutObj:'',\n\t\t\tisTools:false,\n\t\t\tisPause:false,\n\t\t\tmyCurrentTimeSave:0,\n\t\t\tvalSetTimeout:0,\n\t\t\tnb_jury : 32,\n\t\t\tnb_etudiant : 72,\n\t\t\tetudiants: new Array(),\n\t\t\tisLoadTable:false,\n\t\t\tisLoading:false,\n\t    }\n\t  },\n\tmethods: {\n\t\tgoCalcule: function()\n\t\t {\n\t\t\t this.etudiants = new Array();\n\t\t\t this.isLoading = true;\n\t\t\t setTimeout(function () { this.initEtudiants(); }.bind(this),1000);\n\t\t\t \n\t    }\n\t    ,\n\t\t getMessages: function()\n\t\t {\n\t       axios.get(this.url_server + \"/getMessages?id_user=\" + this.id_user)\n\t       .then(response => {\n\t\t       this.isShowLoading = false;\n\t\t       this.messages = response.data.liste;\n\t\t       if (this.messages.length == 0) this.isShowNoResult = true;\n\t\t   })\n\t       .catch(error => displayErreur('Erreur lors du chargement des messages'))\n\t    }\n\t\t,\n\t\tasync logout() {\n\t      await this.$auth.logout();\n\t      this.$router.push('/login')\n\t    }\n\t    ,\n\t\tloadSound(file, id, index)\n\t\t{\n\t\t\tconsole.log(\"debut\")\n\t\t\t\n\t\t\t//file = convertSound(file);\n\t\t\tconsole.log(\"blob : \" + file)\n\t\t\t//var blobUrl = URL.createObjectURL(file);\n\t\t\t\n\t\t\tbufferSound[index] = new Tone.ToneAudioBuffer({\n\t\t\t\tonload: () => {\n\t\t\t\t\tdocument.querySelector('#' + id + ' .duration').innerHTML = this.convertSoundDuration(bufferSound[index].duration);\n\t\t\t\t\tdocument.querySelector('#' + id + ' .content-play').classList.remove('isLoading');\n\t\t\t\t},\n\t\t\t\tonerror: () => {\n\t\t\t\t\tdocument.querySelector('#' + id + ' .duration').innerHTML = \"no sound\";\n\t\t\t\t},\n\t\t\t\treverse: false,\n\t\t\t\turl: file,\n\t\t\t});\n\t\t\t\n\t\t\t/*bufferSound[index] = new Tone.ToneAudioBuffer(file, ( ) => {\n\n\t\t\t\tconsole.log(\"in : \" + id)\n\t\t\t\tdocument.querySelector('#' + id + ' .duration').innerHTML = this.convertSoundDuration(bufferSound[index].duration);\n\t\t\t\tdocument.querySelector('#' + id + ' .content-play').classList.remove('isLoading');\n\t\t\t});*/\n\t\t\t\n\t\t\t\t\t\t\n\t\t\t\n\t\t\t\n\t\t\t\t\t}\n\t    ,\n\t    onload()\n\t    {\n\t\t    console.log(\"ONLOAD\")\n\t    }\n\t    ,\n\t\tplaySound(file,id,index)  \n\t\t{\n\t\t\tif (!document.querySelector('#' + id + ' .content-play').classList.contains('isLoading')) {\n\t\t\t\t\n\t\t\t\tif (this.isPlayingSound == index) {\n\t\t\t\t\tthis.stopSound();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (this.isPlayingSound != -1) {\n\t\t\t\t\t\tclearTimeout(this.valSetTimeout);\n\t\t\t\t\t\tthis.stopSound();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.initAllSound();\n\t\t\t\t\t\n\t\t\t\t\tTone.Transport.start();\n\t\t\t\t\tthis.myCurrentTime = new Tone.TransportTime();\n\t\t\t\t\t\n\t\t\t\t\tthis.isPlayingSound = index;\n\t\t\t\t\tthis.progressValTotal = bufferSound[index].duration;\n\t\t\t\t\tplayerSound.buffer = bufferSound[index];\n\t\t\t\t\tplayerSound.start();\n\t\t\t\t\tplayerSound.onstop = () => {\n\t\t\t\t\t    this.stopSound();\n\t\t\t\t\t  };\n\t\t\t\t\tthis.playSoundProgress(id);\n\t\t\t\t\tconsole.log(\"TITO1\")\n\t\t\t\t\t//document.querySelector('#' + id + ' .player img').setAttribute(\"src\",\"/img/pause.png\");\n\t\t\t\t\tdocument.querySelector('#' + id + ' .ctrlPlay').classList.add(\"hide\");\n\t\t\t\t\tdocument.querySelector('#' + id + ' .ctrlPause').classList.remove(\"hide\");\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t,\n\t\tinitAllSound()\n\t\t{\n\t\t\tdocument.querySelectorAll('.progress-play').forEach(el => el.style.width = '0px');\n\t\t\tdocument.querySelectorAll('.ctrlPlay').forEach(el => el.classList.remove(\"hide\"));\n\t\t\tdocument.querySelectorAll('.ctrlPause').forEach(el => el.classList.add(\"hide\"));\n\t\t}\n\t\t,\n\t\tpauseSound(id)  \n\t\t{\n\t\t\t//Tone.Transport.stop();\n\t\t\tclearInterval(this.valSetInterval);\t\t\n\t\t\tplayerSound.stop();\t\t\n\t\t\t\n\t\t\t\n\t\t\tthis.myCurrentTimeSave = this.myCurrentTime;\n\t\t\tconsole.log(\"PAUSE : \" + this.myCurrentTimeSave)\n\t\t\t//document.querySelector('#' + id + ' .player img').setAttribute(\"src\",\"/img/play.svg\");\n\t\t\tdocument.querySelector('#' + id + ' .ctrlPlay').classList.remove(\"hide\");\n\t\t\tdocument.querySelector('#' + id + ' .ctrlPause').classList.add(\"hide\");\n\t\t\t//Tone.Transport.stop();\n\t\t\t//this.myCurrentTime = 0;\n\t\t}\n\t\t,\n\t\tstopSound()  \n\t\t{\n\t\t\t//Tone.stop();\n\t\t\tconsole.log(\"STOP\")\n\t\t\tthis.isPlayingSound = -1;\n\t\t\tthis.progressValTotal = 0;\n\t\t\tclearInterval(this.valSetInterval);\n\t\t\tthis.initAllSound();\n\t\t\tplayerSound.stop();\t\t\n\t\t\tTone.Transport.stop();\n\t\t\tthis.myCurrentTime = 0;\n\t\t}\n\t\t,\n\t\tplaySoundProgress(id)  \n\t\t{\n\t\t\tconsole.log(this.myCurrentTime + ' / ' + this.progressValTotal)\n\t\t\tvar val_progress = Math.round((this.myCurrentTime*100) / this.progressValTotal )\n\t\t\tif ((this.isPlayingSound != -1) && (val_progress <= 101)) {\t\t\n\t\t\t\tdocument.querySelector('#' + id + ' .progress-play').style.width = val_progress + '%';\n\t\t\t\t\n\t\t\t\tthis.valSetInterval = setTimeout(function () { if (this.isPlayingSound != -1) this.playSoundProgress(id) }.bind(this), 200);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tclearTimeout(this.valSetInterval);\n\t\t\t\tTone.Transport.stop();\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t,\n\t\tconvertSoundDuration(sec)\n\t\t{\n\t\t\tvar val = (sec / 60).toFixed(2);\n\t\t\treturn val.toString().replace(\".\",\":\")\n\t\t}\n\t\t,\n\t\tconvertSound(data) {\n\t\t\tlet binary = convertURIToBinary(data);\n\t\t\tlet blob = new Blob([binary], {\n\t\t\t  type: 'audio/ogg'\n\t\t\t});\n\t\t\tlet blobUrl = URL.createObjectURL(blob);\n\t\t\t\n\t\t\treturn blobUrl;\n\t\t}\n\t\t,\n\t    initDisplayErreur: function()\n\t    {\n\t\t    hideErreur();\n\t    }\n\t    ,\n\t    initEtudiants: function()\n\t    {\n\t\t    \n\t\t    var nb = this.nb_jury;\n\t\t    var table = new Array();\n\t\t    var index = 0;\n\t\t    while(index < this.nb_etudiant) {\n\t\t\t    table = this.getLigneEtudiant(table);\n\t\t\t    index++;\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\t/*for (var i=0;i<table.length;i++) {\n\t\t\t\tconsole.log(i + \" : \" + table[i])\n\t\t\t}*/\n\t\t\t\n\t\t\tthis.etudiants = table;\n\t\t\tthis.isLoadTable = true;\n\t\t\tconsole.log(\"FIN : \" + this.etudiants.length);\n\t\t    //console.log(\"array : \" +  table);\n\t\t    var myArray = '20,28,8,1,25,15,13,2';\n\t\t    if (myArray.includes(2)) console.log(\"YES\");\n\t\t    else console.log(\"NO\")\n\t\t    \n\t    }\n\t     ,\n\t    getLigneEtudiant: function(table)\n\t    {\n\t\t    var sample = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32];\n\t\t    \n\t\t    var val = this.getEtudiant(sample,8);\n\t\t    if (table.includes(val)) {\n\t\t\t    this.getLigneEtudiant(table);\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttable.push(val);\n\t\t\t\treturn table;\n\t\t\t}\n\t\t\t\n\t\t\t\n\t    }\n\t    ,\n\t    getEtudiant: function(array,size)\n\t    {\n\t\t  const results = [],sampled = {};\n\t\t  while(results.length<size && results.length<array.length) {\n\t\t    const index = Math.trunc(Math.random() * array.length);\n\t\t    if(!sampled[index]) {\n\t\t      results.push(array[index]);\n\t\t      sampled[index] = true;\n\t\t    }\n\t\t  }\n\t\t  return results;\n\t\t}\n\t    ,\n\t    getRandomNumber(min,max){\n\t\t    return Math.floor(Math.random()*(max-min+1)+min);\n\t\t}\n\t\t ,\n\t    calcule(i,j){\n\t\t    this.isLoading = false;\n\t\t    var val = '';\n\t\t    val = this.etudiants[i-1].toString(); \n\t\t    const myArray = val.split(\",\");\n\t\t    const myArrayNew = new Array();\n\t\t    for (var u=0;u<myArray.length;u++) {\n\t\t\t    myArrayNew.push('*' + myArray[u] + '*')\n\t\t    }\n\t\t    \n\t\t    console.log(\"myArray\" + myArray)\n\t\t    \n\t\t    var tito = \"no\";\n\t\t     if (myArrayNew.includes(j)) tito = \"yes\";\n\t\t    console.log(\"j : \" + j + \" / \" + tito)\n\t\t    if (myArrayNew.includes('*' + j + '*')) return j;\n\t\t    else return '';\n\t\t}\n\t    \t\t\n\t}\n}\n\n\n\n\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_vm._ssrNode(\"<div class=\\\"content\\\" data-v-7d113c98><div class=\\\"col-content\\\" style=\\\"width:100%;padding-top:20px;\\\" data-v-7d113c98><div style=\\\"width:400px\\\" data-v-7d113c98><div style=\\\"margin-bottom:15px;\\\" data-v-7d113c98><div data-v-7d113c98><label data-v-7d113c98>Nb Ã©tudiants</label> <input type=\\\"text\\\" id=\\\"nb_etudiant\\\"\"+(_vm._ssrAttr(\"value\",(_vm.nb_etudiant)))+\" data-v-7d113c98></div></div> <div style=\\\"margin-bottom:15px;\\\" data-v-7d113c98><div data-v-7d113c98><label data-v-7d113c98>Nb jury</label> <input type=\\\"text\\\" id=\\\"nb_jury\\\"\"+(_vm._ssrAttr(\"value\",(_vm.nb_jury)))+\" data-v-7d113c98></div></div> <div style=\\\"margin-bottom:15px;\\\" data-v-7d113c98><div data-v-7d113c98><div data-v-7d113c98><button class=\\\"btRecord\\\" data-v-7d113c98>Valider</button></div></div></div></div> <table data-v-7d113c98>\"+(_vm._ssrList((_vm.etudiants.length),function(i){return (\"<tr\"+(_vm._ssrStyle(null,null, { display: (_vm.isLoadTable) ? '' : 'none' }))+\" data-v-7d113c98>\"+(_vm._ssrList((_vm.nb_jury),function(j){return (\"<td style=\\\"width:30px;height:30px;border:1px solid #fff;padding:5px\\\" data-v-7d113c98>\"+_vm._ssrEscape(_vm._s(_vm.calcule(i,j)))+\"</td>\")}))+\"</tr>\")}))+\"</table></div></div>\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./excel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./excel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./excel.vue?vue&type=template&id=7d113c98&scoped=true&\"\nimport script from \"./excel.vue?vue&type=script&lang=js&\"\nexport * from \"./excel.vue?vue&type=script&lang=js&\"\nfunction injectStyles (context) {\n  \n  \n}\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  injectStyles,\n  \"7d113c98\",\n  \"39f681dd\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAAA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhBA;AAkBA;AACA;AAAA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAEA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AAYA;AACA;AACA;AACA;AACA;AAMA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAGA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AAEA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAGA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAGA;AAEA;AAEA;AAEA;AACA;AAAA;AACA;AACA;AAEA;AACA;AACA;AAGA;AAEA;AAEA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AA1PA;AA1BA;;;;;;;;;;;;;ACrDA;AACA;AACA;;;;;;;;ACFA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}