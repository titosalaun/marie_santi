(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{428:function(t,e){t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports},429:function(t,e){t.exports=function(t,i){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var o,r,n=[],l=!0,c=!1;try{for(e=e.call(t);!(l=(o=e.next()).done)&&(n.push(o.value),!i||n.length!==i);l=!0);}catch(t){c=!0,r=t}finally{try{l||null==e.return||e.return()}finally{if(c)throw r}}return n}},t.exports.__esModule=!0,t.exports.default=t.exports},430:function(t,e,o){var r=o(431);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?r(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},431:function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o},t.exports.__esModule=!0,t.exports.default=t.exports},432:function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},437:function(t,e,o){var r=o(428),n=o(429),l=o(430),c=o(432);t.exports=function(t,i){return r(t)||n(t,i)||l(t,i)||c()},t.exports.__esModule=!0,t.exports.default=t.exports},438:function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},439:function(t,e){function o(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}t.exports=function(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},463:function(t,e,o){"use strict";o.r(e);o(30),o(24),o(25),o(10),o(39),o(28),o(40);var r=o(7),n=o(15),l=(o(49),o(85),o(37)),c=o(73),d=o.n(c),v=o(433);function _(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}var h={middleware:"auth",computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(l.b)(["isAuthenticated","loggedInfont"])),mounted:function(){this.parametres=JSON.parse(localStorage.getItem("parametres")||"[]"),this.loadParametres(),this.getMessages()},data:function(){return{url_server:this.$store.state.url_server,id_user:this.$auth.user.id,parametres:"",messages:[],isShowLoading:!0,isShowNoResult:!1,isTools:!1,timeOutTools:"",tools_message:"",tools_color_text:"#fff",tools_color_bg:"#000",tools_font_size:20,isMic:!1,meter:"",mic:"",decibelVal:0,intervalDisplayMic:"",micFFT:"",isMicInitialize:!1}},methods:{getMessages:function(){var t=this;d.a.get(this.url_server+"/getMessages?id_user="+this.id_user).then((function(e){t.isShowLoading=!1,t.messages=e.data.liste,0==t.messages.length&&(t.isShowNoResult=!0)})).catch((function(t){return displayErreur("Erreur lors du chargement des messages")}))},openTools:function(){this.isTools?this.isTools=!1:this.isTools=!0},initTools:function(){this.updateColorPicker()},updateColorText:function(){clearTimeout(this.timeOutTools),this.timeOutTools=setTimeout(function(){this.updateColorPicker(),this.$parent.$emit("update:color_text_send",this.tools_color_text)}.bind(this),100)},updateColorBg:function(){clearTimeout(this.timeOutTools),this.timeOutTools=setTimeout(function(){this.updateColorPicker(),this.$parent.$emit("update:color_bg_send",this.tools_color_bg)}.bind(this),100)},updateColorPicker:function(){document.querySelector(".zoneColorText .color-block .value").innerHTML=this.tools_color_text,document.querySelector(".zoneColorBg .color-block .value").innerHTML=this.tools_color_bg},loadParametres:function(){var t=this.parametres;this.tools_color_text=t.color_text,this.tools_color_bg=t.color_bg,this.initTools()},updateFontSize:function(){document.querySelector(".col-content-list").style.fontSize=this.tools_font_size+"px",document.querySelector(".col-content-list").style.lineHeight=parseInt(this.tools_font_size)+3+"px"},initMic:function(){this.meter=new v.a({}),this.mic=new v.g,this.mic.connect(this.meter),document.querySelector(".mesure").supported=v.g.supported,this.mic.open()},startMic:function(){var t=this;v.h.resume(),this.isMic?(this.mic.close(),this.decibelVal=0,this.isMic=!1,this.isMicInitialize=!1,document.querySelector(".startMic").innerHTML="start"):(this.isMicInitialize||(this.initMic(),this.isMicInitialize=!0),this.isMic=!0,document.querySelector(".startMic").innerHTML="stop"),this.isMic?this.intervalDisplayMic=setInterval((function(){return t.displayVal(t.meter.getValue())}),100):clearInterval(this.intervalDisplayMic)},displayVal:function(t){this.index++,t=t;t=parseInt(t)+100,this.decibelVal=t},clamp:function(t,e,o){return Math.min(o,Math.max(e,t))},logout:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$auth.logout();case 2:t.$router.push("/login");case 3:case"end":return e.stop()}}),e)})))()}}},m=h,f=o(33),component=Object(f.a)(m,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("div",{staticClass:"content"},[o("div",{staticClass:"col-left"},[o("div",{staticClass:"logo"},[o("nuxt-link",{attrs:{to:"/"}},[o("svg",{attrs:{id:"Calque_1","data-name":"Calque 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 776.86 861.5"}},[o("path",{attrs:{d:"M291.29,701.18c0,92.18,68.41,131,165.81,131,112.47,0,162.9-51,162.9-163.49V558.56H444.92C360.86,558.56,291.29,614.22,291.29,701.18ZM151.57,725.53c0-113,68.41-197.69,176.24-208.13V490.15c-84.06-10.43-146.67-87-146.67-179.14,0-133.34,130.44-215.66,280-215.66C622.9,95.35,740,173,747,332.46H611.89c-7-80-60.87-117.1-149-117.1-83.48,0-141.45,38.84-141.45,114.78s55.65,117.11,139.14,117.11H928.43V558.56H755.08c0,266.11-3.47,265,5.8,273.64,8.12,7.54,11.6,5.22,167.55,5.22V945.25c-207.55,0-224.94,5.8-263.21-34.2-22.61-23.77-21.45-74.79-21.45-74.79H622.9c-34.78,86.38-107.83,120.59-203.49,120.59C265.2,956.85,151.57,877.42,151.57,725.53Z",transform:"translate(-151.57 -95.35)"}})])])],1),t._v(" "),o("div",{staticClass:"tools"},[o("div",{staticClass:"tools-content",class:{open:t.isTools}},[o("div",[o("label",[t._v("Message")]),t._v(" "),o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tools_message,expression:"tools_message"}],attrs:{placeholder:"...",name:"tools_message",id:"tools_message"},domProps:{value:t.tools_message},on:{input:function(e){e.target.composing||(t.tools_message=e.target.value)}}})]),t._v(" "),o("div",[o("label",[t._v("Couleur")]),t._v(" "),o("div",{staticClass:"zoneColorText"},[o("color-picker",{on:{change:t.updateColorText},model:{value:t.tools_color_text,callback:function(e){t.tools_color_text=e},expression:"tools_color_text"}})],1)]),t._v(" "),o("div",[o("label",[t._v("Fond")]),t._v(" "),o("div",{staticClass:"zoneColorBg"},[o("color-picker",{on:{change:t.updateColorBg},model:{value:t.tools_color_bg,callback:function(e){t.tools_color_bg=e},expression:"tools_color_bg"}})],1)]),t._v(" "),o("div",[o("label",[t._v("Taille : "+t._s(t.tools_font_size))]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.tools_font_size,expression:"tools_font_size"}],staticClass:"slider",attrs:{type:"range",id:"tools_font_size",min:"10",max:"200"},domProps:{value:t.tools_font_size},on:{input:function(e){return t.updateFontSize()},__r:function(e){t.tools_font_size=e.target.value}}})]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.isAuthenticated,expression:"isAuthenticated"}]},[o("label",{staticClass:"cursor-pointer",on:{click:function(e){return t.logout()}}},[t._v("log-out")])])]),t._v(" "),o("div",{staticClass:"tools-nav",on:{click:t.openTools}},[t._v("Paramètres")])])]),t._v(" "),o("div",{staticClass:"col-content",class:{marge:t.isTools}},[o("div",{staticClass:"mesure"},[o("div",{staticClass:"mesure-val"},[t._v(t._s(t.decibelVal))]),o("div",{staticClass:"indice"},[t._v("DBA")])]),t._v(" "),o("div",{attrs:{id:"content"}}),t._v(" "),o("div",{staticClass:"col-content-list"},[t.messages.length?t._e():o("div",[o("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowLoading,expression:"isShowLoading"}]},[t._v("Chargement des messages...")]),o("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowNoResult,expression:"isShowNoResult"}],staticClass:"flex"},[o("div",{staticClass:"pr-1 flex items-center"},[o("NuxtLink",{attrs:{to:{path:t.url_add}}},[t._v("aucun résultat, ajouter un message ")])],1),t._v(" "),o("div",{staticClass:"add highlight"},[o("NuxtLink",{attrs:{to:{path:t.url_add}}},[o("svg",{staticClass:"big",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[o("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"}})])])],1)])]),t._v(" "),t._l(t.messages,(function(e,r){return o("div",{staticClass:"item"},[t._v(t._s(e.texte))])}))],2),t._v(" "),t._m(0)]),t._v(" "),o("div",{staticClass:"col-right"},[o("div",{staticClass:"startMic cursor-pointer",on:{click:function(e){return t.startMic()}}},[t._v("start")])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"canvas-area",attrs:{id:"p5Canvas"}})])}],!1,null,"701ccebe",null);e.default=component.exports}}]);